# Onboarding Flow Diagram

## Visual Flow Chart

```
┌─────────────────────────────────────────────────────────────────┐
│                     USER SIGNS IN WITH GOOGLE                    │
└────────────────────────────┬────────────────────────────────────┘
                             │
                             ▼
                    ┌────────────────┐
                    │ Check User in  │
                    │   Database     │
                    └────────┬───────┘
                             │
                ┌────────────┴────────────┐
                │                         │
                ▼                         ▼
        ┌───────────────┐         ┌──────────────┐
        │ New User      │         │ Existing     │
        │ (No Record)   │         │ User Found   │
        └───────┬───────┘         └──────┬───────┘
                │                        │
                ▼                        ▼
        ┌───────────────┐         ┌──────────────┐
        │ Create User   │         │ Check        │
        │ isOnboarded:  │         │ isOnboarded  │
        │ false         │         │ Status       │
        └───────┬───────┘         └──────┬───────┘
                │                        │
                │                ┌───────┴────────┐
                │                │                │
                │                ▼                ▼
                │         ┌──────────┐    ┌──────────┐
                │         │ false    │    │ true     │
                │         └────┬─────┘    └────┬─────┘
                │              │               │
                └──────────────┴───────┐       │
                                       │       │
                                       ▼       │
                              ┌─────────────┐  │
                              │ ONBOARDING  │  │
                              │    PAGE     │  │
                              └──────┬──────┘  │
                                     │         │
                                     ▼         │
                        ┌────────────────────┐ │
                        │   STEP 1: USERNAME │ │
                        │                    │ │
                        │ ┌────────────────┐ │ │
                        │ │ Enter Username │ │ │
                        │ └────────┬───────┘ │ │
                        │          ▼         │ │
                        │ ┌────────────────┐ │ │
                        │ │ Click "Check"  │ │ │
                        │ └────────┬───────┘ │ │
                        │          ▼         │ │
                        │ ┌────────────────┐ │ │
                        │ │ API: Check     │ │ │
                        │ │ /check-username│ │ │
                        │ └────────┬───────┘ │ │
                        │          │         │ │
                        │    ┌─────┴─────┐   │ │
                        │    │           │   │ │
                        │    ▼           ▼   │ │
                        │ ┌──────┐  ┌──────┐ │ │
                        │ │Taken │  │Avail │ │ │
                        │ └──┬───┘  └───┬──┘ │ │
                        │    │          │    │ │
                        │    │          ▼    │ │
                        │    │    ┌─────────┐│ │
                        │    │    │  Next   ││ │
                        │    │    └────┬────┘│ │
                        │    │         │     │ │
                        │    └─────────┘     │ │
                        └────────────────────┘ │
                                     │         │
                                     ▼         │
                        ┌────────────────────┐ │
                        │ STEP 2: DEPARTMENT │ │
                        │                    │ │
                        │ ┌────────────────┐ │ │
                        │ │ Select Dept    │ │ │
                        │ │ - CSE          │ │ │
                        │ │ - AI&DS        │ │ │
                        │ │ - CSE(AI&ML)   │ │ │
                        │ │ - CSBS         │ │ │
                        │ │ - IT, ECE, etc │ │ │
                        │ └────────┬───────┘ │ │
                        │          ▼         │ │
                        │ ┌────────────────┐ │ │
                        │ │ Back │  Next   │ │ │
                        │ └──────┴────┬────┘ │ │
                        └─────────────┼──────┘ │
                                      │        │
                                      ▼        │
                        ┌────────────────────┐ │
                        │ STEP 3: PLATFORMS  │ │
                        │                    │ │
                        │ ┌────────────────┐ │ │
                        │ │ LeetCode ID    │ │ │
                        │ └────────────────┘ │ │
                        │ ┌────────────────┐ │ │
                        │ │ CodeForces ID  │ │ │
                        │ └────────────────┘ │ │
                        │ ┌────────────────┐ │ │
                        │ │ CodeChef ID    │ │ │
                        │ └────────────────┘ │ │
                        │          │         │ │
                        │          ▼         │ │
                        │ ┌────────────────┐ │ │
                        │ │ At least 1     │ │ │
                        │ │ required       │ │ │
                        │ └────────┬───────┘ │ │
                        │          ▼         │ │
                        │ ┌────────────────┐ │ │
                        │ │ Back │ Submit  │ │ │
                        │ └──────┴────┬────┘ │ │
                        └─────────────┼──────┘ │
                                      │        │
                                      ▼        │
                              ┌───────────────┐│
                              │ API: POST     ││
                              │ /auth/onboard ││
                              └───────┬───────┘│
                                      │        │
                                      ▼        │
                              ┌───────────────┐│
                              │ Create Student││
                              │ Profile       ││
                              └───────┬───────┘│
                                      │        │
                                      ▼        │
                              ┌───────────────┐│
                              │ Update User   ││
                              │ isOnboarded:  ││
                              │ true          ││
                              └───────┬───────┘│
                                      │        │
                                      └────────┤
                                               │
                                               ▼
                                    ┌──────────────────┐
                                    │    DASHBOARD     │
                                    │                  │
                                    │ ┌──────────────┐ │
                                    │ │ User Profile │ │
                                    │ └──────────────┘ │
                                    │ ┌──────────────┐ │
                                    │ │ All Students │ │
                                    │ └──────────────┘ │
                                    │ ┌──────────────┐ │
                                    │ │ Top Coder    │ │
                                    │ └──────────────┘ │
                                    └──────────────────┘
```

## Component Interaction Diagram

```
┌─────────────────────────────────────────────────────────────────┐
│                         FRONTEND                                 │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  ┌──────────────┐         ┌──────────────┐                     │
│  │   App.tsx    │────────▶│ AuthContext  │                     │
│  │              │         │              │                     │
│  │ - Routes     │         │ - user       │                     │
│  │ - Protection │         │ - token      │                     │
│  └──────┬───────┘         │ - isOnboarded│                     │
│         │                 └──────────────┘                     │
│         │                                                       │
│         ▼                                                       │
│  ┌──────────────┐                                              │
│  │ Onboarding   │                                              │
│  │              │                                              │
│  │ - Step 1     │──────┐                                       │
│  │ - Step 2     │      │                                       │
│  │ - Step 3     │      │                                       │
│  └──────────────┘      │                                       │
│                        │                                       │
└────────────────────────┼───────────────────────────────────────┘
                         │
                         │ HTTP Requests
                         │
┌────────────────────────┼───────────────────────────────────────┐
│                        ▼              BACKEND                   │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  ┌──────────────┐         ┌──────────────┐                     │
│  │  routes.ts   │────────▶│  storage.ts  │                     │
│  │              │         │              │                     │
│  │ - /check-    │         │ - getUserBy  │                     │
│  │   username   │         │   Username   │                     │
│  │              │         │              │                     │
│  │ - /auth/     │         │ - createUser │                     │
│  │   onboard    │         │              │                     │
│  │              │         │ - updateUser │                     │
│  │ - /auth/me   │         │              │                     │
│  │              │         │ - create     │                     │
│  │ - /student/  │         │   Student    │                     │
│  │   :username  │         │              │                     │
│  └──────────────┘         └──────┬───────┘                     │
│                                  │                              │
│                                  ▼                              │
│                          ┌──────────────┐                       │
│                          │  Database    │                       │
│                          │              │                       │
│                          │ - users      │                       │
│                          │ - students   │                       │
│                          └──────────────┘                       │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

## State Management Flow

```
┌─────────────────────────────────────────────────────────────────┐
│                      USER STATE LIFECYCLE                        │
└─────────────────────────────────────────────────────────────────┘

1. Initial State (Not Authenticated)
   ┌──────────────────────────────┐
   │ user: null                   │
   │ token: null                  │
   │ isAuthenticated: false       │
   │ isLoading: false             │
   └──────────────────────────────┘

2. After Google OAuth Sign-In
   ┌──────────────────────────────┐
   │ user: {                      │
   │   id: "user-123"             │
   │   username: "temp_google_id" │
   │   role: "student"            │
   │   isOnboarded: false         │
   │ }                            │
   │ token: "jwt_token_here"      │
   │ isAuthenticated: true        │
   └──────────────────────────────┘

3. During Onboarding
   ┌──────────────────────────────┐
   │ Form State:                  │
   │ - step: 1/2/3                │
   │ - username: "newuser"        │
   │ - usernameAvailable: true    │
   │ - department: "CSE"          │
   │ - leetcode: "newuser_lc"     │
   │ - codeforces: "newuser_cf"   │
   │ - codechef: "newuser_cc"     │
   └──────────────────────────────┘

4. After Onboarding Complete
   ┌──────────────────────────────┐
   │ user: {                      │
   │   id: "user-123"             │
   │   username: "newuser"        │
   │   role: "student"            │
   │   isOnboarded: true          │
   │ }                            │
   │ token: "jwt_token_here"      │
   │ isAuthenticated: true        │
   └──────────────────────────────┘

5. Subsequent Sign-Ins
   ┌──────────────────────────────┐
   │ Direct to Dashboard          │
   │ (Skip Onboarding)            │
   └──────────────────────────────┘
```
